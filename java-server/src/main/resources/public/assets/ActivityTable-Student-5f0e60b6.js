import{d as y,H as v,X as _,_ as p,e as n,f as t,L as a,F as u,M as D,j as c,v as r,h as B,Y as g,o as d}from"./index-3f7c6146.js";/* empty css                    *//* empty css              *//* empty css               */import{m as o,a as f}from"./messageBox-f4d8c0d3.js";import{c as m,a as I,d as F,e as E}from"./affairServ-848d5dc3.js";const A=y({data:()=>({studentId:null,activityList:[],studentList:[],editedItem:{},info:{},activityDate:new Date}),computed:{},created(){this.initialize()},methods:{async initialize(){let e=await v(this.studentId);this.info=e.data.info,this.studentId=this.info.studentId,this.activityList=await m(this.studentId),this.studentList=await I(),this.activityDate=new Date(this.editedItem.activityDate)},async query(){this.activityList=await m(this.studentId)},addItem(){this.editedItem={},document.getElementById("favDialog").show()},editItem(e){this.editedItem=e,document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close(),this.editedItem.activityDate=_(this.activityDate);const e=await F(this.editedItem.activityId,this.info.studentId,this.editedItem.activityName,this.editedItem.activityDate,this.editedItem.activityProfile);e.code==0?(o(this,"保存成功"),this.query()):o(this,e.msg)},async deleteItem(e){if(!await f("确认删除吗?"))return;const l=await E(e);l.code==0?(o(this,"成功删除了一条课外活动记录"),this.query()):o(this,l.msg)}}}),b={class:"base_form"},w=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"课外活动管理")],-1),L={class:"base_query_oneLine"},N=t("div",{class:"query_left"},null,-1),k={class:"query_right"},V=t("span",null,"学生",-1),q={class:"table_center"},C={class:"content"},$=t("tr",{class:"<table_th"},[t("td",null,"学号"),t("td",null,"姓名"),t("td",null,"课外活动名称"),t("td",null,"课外活动时间"),t("td",null,"课外活动内容简介")],-1),P={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},S=t("div",{class:"base_title"},"--课外活动记录添加对话框显示--",-1),U={class:"dialog-div"},x={class:"dialog_content"},z=t("td",{colspan:"1",style:{"text-align":"right"}},"学生",-1),M={colspan:"1"},T=t("td",{colspan:"1",style:{"text-align":"right"}},"活动名称",-1),j={colspan:"1"},H=t("td",{colspan:"1",style:{"text-align":"right"}},"活动日期",-1),O={colspan:"1"},X=t("td",{colspan:"1",style:{"text-align":"right"}},"活动简介",-1),Y={colspan:"1"},G={colspan:"2"};function J(e,s,l,K,Q,R){const h=g;return d(),n(u,null,[t("div",b,[w,t("div",L,[N,t("div",k,[V,t("td",null,a(e.info.name),1)])]),t("div",q,[t("table",C,[$,(d(!0),n(u,null,D(e.activityList,i=>(d(),n("tr",{key:i.activityId},[t("td",null,a(i.stuNum),1),t("td",null,a(i.stuName),1),t("td",null,a(i.activityName),1),t("td",null,a(i.activityDate),1),t("td",null,a(i.activityProfile),1)]))),128))])])]),t("dialog",P,[S,t("div",U,[t("table",x,[t("tr",null,[z,t("td",M,a(e.info.name),1)]),t("tr",null,[T,t("td",j,[c(t("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>e.editedItem.activityName=i),class:"commInput"},null,512),[[r,e.editedItem.activityName]])])]),t("tr",null,[H,t("td",O,[B(h,{modelValue:e.activityDate,"onUpdate:modelValue":s[1]||(s[1]=i=>e.activityDate=i),type:"date",style:{width:"100%"},placeholder:"选择活动日期"},null,8,["modelValue"])])]),t("tr",null,[X,t("td",Y,[c(t("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>e.editedItem.activityProfile=i),class:"commInput"},null,512),[[r,e.editedItem.activityProfile]])])]),t("tr",null,[t("td",G,[t("button",{class:"commButton",onClick:s[3]||(s[3]=i=>e.close()),style:{"margin-right":"30px"}}," 取消 "),t("button",{class:"commButton",onClick:s[4]||(s[4]=i=>e.confirm())},"确认")])])])])])],64)}const at=p(A,[["render",J]]);export{at as default};
