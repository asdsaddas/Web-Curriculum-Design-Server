import{d as D,X as I,_ as F,e as o,f as t,j as d,k as p,F as n,M as r,v as m,h as g,Y as E,o as u,L as l}from"./index-3f7c6146.js";/* empty css                    *//* empty css              *//* empty css               */import{m as a,a as v}from"./messageBox-f4d8c0d3.js";import{g as h,a as f,p as y,b}from"./affairServ-848d5dc3.js";const k=D({data:()=>({studentId:null,practiceList:[],studentList:[],editedItem:{},practiceDate:new Date}),computed:{},created(){this.initialize()},methods:{async initialize(){this.practiceList=await h(this.studentId),this.studentList=await f(),this.practiceDate=new Date(this.editedItem.practiceDate)},async query(){this.practiceList=await h(this.studentId)},addItem(){this.editedItem={},document.getElementById("favDialog").show()},editItem(s){this.editedItem=s,document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close(),this.editedItem.practiceDate=I(this.practiceDate);const s=await y(this.editedItem.practiceId,this.editedItem.studentId,this.editedItem.practiceName,this.editedItem.practiceDate,this.editedItem.practiceProfile);s.code==0?(a(this,"保存成功"),this.query()):a(this,s.msg)},async deleteItem(s){if(!await v("确认删除吗?"))return;const c=await b(s);c.code==0?(a(this,"成功删除了一条社会实践记录"),this.query()):a(this,c.msg)}}}),C={class:"base_form"},w=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"社会实践管理")],-1),A={class:"base_query_oneLine"},L={class:"query_left"},$={class:"query_right"},V=t("span",null,"学生",-1),N=t("option",{value:"0"},"请选择...",-1),q=["value"],P={class:"table_center"},U={class:"content"},S=t("tr",{class:"<table_th"},[t("td",null,"学号"),t("td",null,"姓名"),t("td",null,"社会实践名称"),t("td",null,"社会实践时间"),t("td",null,"社会实践内容简介"),t("td",null,"操作")],-1),M=["onClick"],z=["onClick"],T={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},j=t("div",{class:"base_title"},"--社会实践记录添加对话框显示--",-1),O={class:"dialog-div"},X={class:"dialog_content"},Y=t("td",{colspan:"1",style:{"text-align":"right"}},"学生",-1),G={colspan:"1"},H=t("option",{value:"0"},"请选择...",-1),J=["value"],K=t("td",{colspan:"1",style:{"text-align":"right"}},"实践名称",-1),Q={colspan:"1"},R=t("td",{colspan:"1",style:{"text-align":"right"}},"实践日期",-1),W={colspan:"1"},Z=t("td",{colspan:"1",style:{"text-align":"right"}},"实践简介",-1),x={colspan:"1"},tt={colspan:"2"};function et(s,i,c,st,it,ot){const _=E;return u(),o(n,null,[t("div",C,[w,t("div",A,[t("div",L,[t("button",{class:"commButton",onClick:i[0]||(i[0]=e=>s.addItem())},"添加社会实践记录")]),t("div",$,[V,d(t("select",{class:"commInput","onUpdate:modelValue":i[1]||(i[1]=e=>s.studentId=e)},[N,(u(!0),o(n,null,r(s.studentList,e=>(u(),o("option",{key:e.id,value:e.id},l(e.title),9,q))),128))],512),[[p,s.studentId]]),t("button",{class:"commButton",onClick:i[2]||(i[2]=e=>s.query())},"查询社会实践记录列表")])]),t("div",P,[t("table",U,[S,(u(!0),o(n,null,r(s.practiceList,e=>(u(),o("tr",{key:e.practiceId},[t("td",null,l(e.stuNum),1),t("td",null,l(e.stuName),1),t("td",null,l(e.practiceName),1),t("td",null,l(e.practiceDate),1),t("td",null,l(e.practiceProfile),1),t("td",null,[t("button",{class:"table_edit_button",onClick:B=>s.editItem(e)},"编辑",8,M),t("button",{class:"table_delete_button",onClick:B=>s.deleteItem(e.practiceId)},"删除",8,z)])]))),128))])])]),t("dialog",T,[j,t("div",O,[t("table",X,[t("tr",null,[Y,t("td",G,[d(t("select",{class:"commInput","onUpdate:modelValue":i[3]||(i[3]=e=>s.editedItem.studentId=e)},[H,(u(!0),o(n,null,r(s.studentList,e=>(u(),o("option",{key:e.id,value:e.id},l(e.title),9,J))),128))],512),[[p,s.editedItem.studentId]])])]),t("tr",null,[K,t("td",Q,[d(t("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>s.editedItem.practiceName=e),class:"commInput"},null,512),[[m,s.editedItem.practiceName]])])]),t("tr",null,[R,t("td",W,[g(_,{modelValue:s.practiceDate,"onUpdate:modelValue":i[5]||(i[5]=e=>s.practiceDate=e),type:"date",style:{width:"100%"},placeholder:"选择活动日期"},null,8,["modelValue"])])]),t("tr",null,[Z,t("td",x,[d(t("input",{"onUpdate:modelValue":i[6]||(i[6]=e=>s.editedItem.practiceProfile=e),class:"commInput"},null,512),[[m,s.editedItem.practiceProfile]])])]),t("tr",null,[t("td",tt,[t("button",{class:"commButton",onClick:i[7]||(i[7]=e=>s.close()),style:{"margin-right":"30px"}}," 取消 "),t("button",{class:"commButton",onClick:i[8]||(i[8]=e=>s.confirm())},"确认")])])])])])],64)}const rt=F(k,[["render",et]]);export{rt as default};
