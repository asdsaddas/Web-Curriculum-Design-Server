import{m as l,a as _}from"./messageBox-f4d8c0d3.js";import{h as r,d as B,e as f,i as p,j as I}from"./teachingServ-cfc695c1.js";import{d as g,H as v,_ as F,e as i,f as t,L as u,j as h,k as m,F as d,M as c,o as n}from"./index-3f7c6146.js";const y=g({data:()=>({studentId:null,courseId:null,info:{},fitList:[],studentList:[],courseList:[],editedItem:{}}),computed:{},created(){this.initialize()},methods:{async initialize(){let s=await v(this.studentId);this.info=s.data.info,this.studentId=this.info.studentId,this.fitList=await r(this.studentId,this.courseId),this.studentList=await B(),this.courseList=await f()},async query(){this.fitList=await r(this.studentId,this.courseId)},addItem(){this.editedItem={},document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close();const s=await p(this.editedItem.fitId,this.info.studentId,this.editedItem.courseId);s.code==0?(l(this,"保存成功"),this.query()):l(this,s.msg)},async deleteItem(s){if(!await _("确认删除吗?"))return;const a=await I(s);a.code==0?(l(this,"成功删除了一条选课记录"),this.query()):l(this,a.msg)}}}),b={class:"base_form"},D=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"选课管理")],-1),E={class:"base_query_oneLine"},L={class:"query_left"},k={class:"query_right"},C=t("span",null,"学生",-1),w=t("span",null,"课程",-1),A=t("option",{value:"0"},"请选择...",-1),$=["value"],q={class:"table_center"},S={class:"content"},N=t("tr",{class:"<table_th"},[t("td",null,"学号"),t("td",null,"姓名"),t("td",null,"课程号"),t("td",null,"课程名"),t("td",null,"学分"),t("td",null,"操作")],-1),V=["onClick"],j={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"210px"}},z=t("div",{class:"base_title"},"--选课记录添加对话框显示--",-1),M={class:"dialog-div"},O={class:"dialog_content"},U=t("td",{colspan:"1",style:{"text-align":"right"}},"学生",-1),H={colspan:"1"},T=t("td",{colspan:"1",style:{"text-align":"right"}},"课程名",-1),G={colspan:"1"},J=t("option",{value:"0"},"请选择...",-1),K=["value"],P={colspan:"2"};function Q(s,o,a,R,W,X){return n(),i(d,null,[t("div",b,[D,t("div",E,[t("div",L,[t("button",{class:"commButton",onClick:o[0]||(o[0]=e=>s.addItem())},"添加选课记录")]),t("div",k,[C,t("td",null,u(s.info.name),1),w,h(t("select",{class:"commInput","onUpdate:modelValue":o[1]||(o[1]=e=>s.courseId=e)},[A,(n(!0),i(d,null,c(s.courseList,e=>(n(),i("option",{key:e.id,value:e.id},u(e.title),9,$))),128))],512),[[m,s.courseId]]),t("button",{class:"commButton",onClick:o[2]||(o[2]=e=>s.query())},"查询选课记录列表")])]),t("div",q,[t("table",S,[N,(n(!0),i(d,null,c(s.fitList,e=>(n(),i("tr",{key:e.fitId},[t("td",null,u(e.stuNum),1),t("td",null,u(e.stuName),1),t("td",null,u(e.courseNum),1),t("td",null,u(e.courseName),1),t("td",null,u(e.courseCredit),1),t("td",null,[t("button",{class:"table_delete_button",onClick:Y=>s.deleteItem(e.fitId)},"删除",8,V)])]))),128))])])]),t("dialog",j,[z,t("div",M,[t("table",O,[t("tr",null,[U,t("td",H,u(s.info.name),1)]),t("tr",null,[T,t("td",G,[h(t("select",{class:"commInput","onUpdate:modelValue":o[3]||(o[3]=e=>s.editedItem.courseId=e)},[J,(n(!0),i(d,null,c(s.courseList,e=>(n(),i("option",{key:e.id,value:e.id},u(e.title),9,K))),128))],512),[[m,s.editedItem.courseId]])])]),t("tr",null,[t("td",P,[t("button",{class:"commButton",onClick:o[4]||(o[4]=e=>s.close()),style:{"margin-right":"30px"}}," 取消 "),t("button",{class:"commButton",onClick:o[5]||(o[5]=e=>s.confirm())},"确认")])])])])])],64)}const st=F(y,[["render",Q]]);export{st as default};
