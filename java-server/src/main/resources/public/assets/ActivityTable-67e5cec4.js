import{d as B,X as _,_ as D,e as o,f as t,j as d,k as m,F as n,M as r,v,h as I,Y as g,o as u,L as l}from"./index-3f7c6146.js";/* empty css                    *//* empty css              *//* empty css               */import{m as a,a as F}from"./messageBox-f4d8c0d3.js";import{c as y,a as f,d as E,e as b}from"./affairServ-848d5dc3.js";const A=B({data:()=>({studentId:null,activityList:[],studentList:[],editedItem:{},activityDate:new Date}),computed:{},created(){this.initialize()},methods:{async initialize(){this.activityList=await y(this.studentId),this.studentList=await f(),this.activityDate=new Date(this.editedItem.activityDate)},async query(){this.activityList=await y(this.studentId)},addItem(){this.editedItem={},document.getElementById("favDialog").show()},editItem(s){this.editedItem=s,document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close(),this.editedItem.activityDate=_(this.activityDate);const s=await E(this.editedItem.activityId,this.editedItem.studentId,this.editedItem.activityName,this.editedItem.activityDate,this.editedItem.activityProfile);s.code==0?(a(this,"保存成功"),this.query()):a(this,s.msg)},async deleteItem(s){if(!await F("确认删除吗?"))return;const c=await b(s);c.code==0?(a(this,"成功删除了一条课外活动记录"),this.query()):a(this,c.msg)}}}),k={class:"base_form"},C=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"课外活动管理")],-1),w={class:"base_query_oneLine"},L={class:"query_left"},$={class:"query_right"},V=t("span",null,"学生",-1),N=t("option",{value:"0"},"请选择...",-1),q=["value"],P={class:"table_center"},U={class:"content"},S=t("tr",{class:"<table_th"},[t("td",null,"学号"),t("td",null,"姓名"),t("td",null,"课外活动名称"),t("td",null,"课外活动时间"),t("td",null,"课外活动内容简介"),t("td",null,"操作")],-1),M=["onClick"],z=["onClick"],T={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},j=t("div",{class:"base_title"},"--课外活动记录添加对话框显示--",-1),O={class:"dialog-div"},X={class:"dialog_content"},Y=t("td",{colspan:"1",style:{"text-align":"right"}},"学生",-1),G={colspan:"1"},H=t("option",{value:"0"},"请选择...",-1),J=["value"],K=t("td",{colspan:"1",style:{"text-align":"right"}},"活动名称",-1),Q={colspan:"1"},R=t("td",{colspan:"1",style:{"text-align":"right"}},"活动日期",-1),W={colspan:"1"},Z=t("td",{colspan:"1",style:{"text-align":"right"}},"活动简介",-1),x={colspan:"1"},tt={colspan:"2"};function et(s,i,c,st,it,ot){const h=g;return u(),o(n,null,[t("div",k,[C,t("div",w,[t("div",L,[t("button",{class:"commButton",onClick:i[0]||(i[0]=e=>s.addItem())},"添加课外活动记录")]),t("div",$,[V,d(t("select",{class:"commInput","onUpdate:modelValue":i[1]||(i[1]=e=>s.studentId=e)},[N,(u(!0),o(n,null,r(s.studentList,e=>(u(),o("option",{key:e.id,value:e.id},l(e.title),9,q))),128))],512),[[m,s.studentId]]),t("button",{class:"commButton",onClick:i[2]||(i[2]=e=>s.query())},"查询课外活动记录列表")])]),t("div",P,[t("table",U,[S,(u(!0),o(n,null,r(s.activityList,e=>(u(),o("tr",{key:e.activityId},[t("td",null,l(e.stuNum),1),t("td",null,l(e.stuName),1),t("td",null,l(e.activityName),1),t("td",null,l(e.activityDate),1),t("td",null,l(e.activityProfile),1),t("td",null,[t("button",{class:"table_edit_button",onClick:p=>s.editItem(e)},"编辑",8,M),t("button",{class:"table_delete_button",onClick:p=>s.deleteItem(e.activityId)},"删除",8,z)])]))),128))])])]),t("dialog",T,[j,t("div",O,[t("table",X,[t("tr",null,[Y,t("td",G,[d(t("select",{class:"commInput","onUpdate:modelValue":i[3]||(i[3]=e=>s.editedItem.studentId=e)},[H,(u(!0),o(n,null,r(s.studentList,e=>(u(),o("option",{key:e.id,value:e.id},l(e.title),9,J))),128))],512),[[m,s.editedItem.studentId]])])]),t("tr",null,[K,t("td",Q,[d(t("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>s.editedItem.activityName=e),class:"commInput"},null,512),[[v,s.editedItem.activityName]])])]),t("tr",null,[R,t("td",W,[I(h,{modelValue:s.activityDate,"onUpdate:modelValue":i[5]||(i[5]=e=>s.activityDate=e),type:"date",style:{width:"100%"},placeholder:"选择活动日期"},null,8,["modelValue"])])]),t("tr",null,[Z,t("td",x,[d(t("input",{"onUpdate:modelValue":i[6]||(i[6]=e=>s.editedItem.activityProfile=e),class:"commInput"},null,512),[[v,s.editedItem.activityProfile]])])]),t("tr",null,[t("td",tt,[t("button",{class:"commButton",onClick:i[7]||(i[7]=e=>s.close()),style:{"margin-right":"30px"}}," 取消 "),t("button",{class:"commButton",onClick:i[8]||(i[8]=e=>s.confirm())},"确认")])])])])])],64)}const rt=D(A,[["render",et]]);export{rt as default};
