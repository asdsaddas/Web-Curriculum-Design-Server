import{m as a,a as p}from"./messageBox-f4d8c0d3.js";import{h,d as _,e as B,i as I,j as v}from"./teachingServ-cfc695c1.js";import{d as f,_ as g,e as u,f as t,j as r,k as c,F as n,M as d,o as i,L as l}from"./index-3f7c6146.js";const F=f({data:()=>({studentId:null,courseId:null,fitList:[],studentList:[],courseList:[],editedItem:{}}),computed:{},created(){this.initialize()},methods:{async initialize(){this.fitList=await h(this.studentId,this.courseId),this.studentList=await _(),this.courseList=await B()},async query(){this.fitList=await h(this.studentId,this.courseId),console.log(this.fitList)},addItem(){this.editedItem={},document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close();const e=await I(this.editedItem.fitId,this.editedItem.studentId,this.editedItem.courseId);e.code==0?(a(this,"保存成功"),this.query()):a(this,e.msg)},async deleteItem(e){if(!await p("确认删除吗?"))return;const m=await v(e);m.code==0?(a(this,"成功删除了一条选课记录"),this.query()):a(this,m.msg)}}}),y={class:"base_form"},b=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"选课管理")],-1),E={class:"base_query_oneLine"},L={class:"query_left"},D={class:"query_right"},k=t("span",null,"学生",-1),C=t("option",{value:"0"},"请选择...",-1),w=["value"],A=t("span",null,"课程",-1),$=t("option",{value:"0"},"请选择...",-1),q=["value"],N={class:"table_center"},V={class:"content"},S=t("tr",{class:"<table_th"},[t("td",null,"学号"),t("td",null,"姓名"),t("td",null,"课程号"),t("td",null,"课程名"),t("td",null,"学分"),t("td",null,"操作")],-1),U=["onClick"],j={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"210px"}},z=t("div",{class:"base_title"},"--选课记录添加对话框显示--",-1),M={class:"dialog-div"},O={class:"dialog_content"},T=t("td",{colspan:"1",style:{"text-align":"right"}},"学生",-1),G={colspan:"1"},H=t("option",{value:"0"},"请选择...",-1),J=["value"],K=t("td",{colspan:"1",style:{"text-align":"right"}},"课程名",-1),P={colspan:"1"},Q=t("option",{value:"0"},"请选择...",-1),R=["value"],W={colspan:"2"};function X(e,o,m,Y,Z,x){return i(),u(n,null,[t("div",y,[b,t("div",E,[t("div",L,[t("button",{class:"commButton",onClick:o[0]||(o[0]=s=>e.addItem())},"添加选课记录")]),t("div",D,[k,r(t("select",{class:"commInput","onUpdate:modelValue":o[1]||(o[1]=s=>e.studentId=s)},[C,(i(!0),u(n,null,d(e.studentList,s=>(i(),u("option",{key:s.id,value:s.id},l(s.title),9,w))),128))],512),[[c,e.studentId]]),A,r(t("select",{class:"commInput","onUpdate:modelValue":o[2]||(o[2]=s=>e.courseId=s)},[$,(i(!0),u(n,null,d(e.courseList,s=>(i(),u("option",{key:s.id,value:s.id},l(s.title),9,q))),128))],512),[[c,e.courseId]]),t("button",{class:"commButton",onClick:o[3]||(o[3]=s=>e.query())},"查询选课记录列表")])]),t("div",N,[t("table",V,[S,(i(!0),u(n,null,d(e.fitList,s=>(i(),u("tr",{key:s.fitId},[t("td",null,l(s.stuNum),1),t("td",null,l(s.stuName),1),t("td",null,l(s.courseNum),1),t("td",null,l(s.courseName),1),t("td",null,l(s.courseCredit),1),t("td",null,[t("button",{class:"table_delete_button",onClick:tt=>e.deleteItem(s.fitId)},"删除",8,U)])]))),128))])])]),t("dialog",j,[z,t("div",M,[t("table",O,[t("tr",null,[T,t("td",G,[r(t("select",{class:"commInput","onUpdate:modelValue":o[4]||(o[4]=s=>e.editedItem.studentId=s)},[H,(i(!0),u(n,null,d(e.studentList,s=>(i(),u("option",{key:s.id,value:s.id},l(s.title),9,J))),128))],512),[[c,e.editedItem.studentId]])])]),t("tr",null,[K,t("td",P,[r(t("select",{class:"commInput","onUpdate:modelValue":o[5]||(o[5]=s=>e.editedItem.courseId=s)},[Q,(i(!0),u(n,null,d(e.courseList,s=>(i(),u("option",{key:s.id,value:s.id},l(s.title),9,R))),128))],512),[[c,e.editedItem.courseId]])])]),t("tr",null,[t("td",W,[t("button",{class:"commButton",onClick:o[6]||(o[6]=s=>e.close()),style:{"margin-right":"30px"}}," 取消 "),t("button",{class:"commButton",onClick:o[7]||(o[7]=s=>e.confirm())},"确认")])])])])])],64)}const ut=g(F,[["render",X]]);export{ut as default};
