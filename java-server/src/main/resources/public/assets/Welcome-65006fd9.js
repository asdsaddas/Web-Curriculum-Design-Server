import{d as U,g as B,u as F,t as v,r as D,a as $,b as I,_ as W,c as b,e as p,f as t,h as i,w as l,i as C,j as n,v as u,k as S,E as P,l as L,o as h,m as f,n as M,p as j,q as z,s as R,x as q,y as H,z as G,A as J}from"./index-3f7c6146.js";/* empty css               */import{g as c}from"./base64-ddc34627.js";/* empty css                 *//* empty css              */import{m as a}from"./messageBox-f4d8c0d3.js";function K(e){return e?!0:"您必须输入用户名密码"}const O=U({data:()=>({username:"",password:"",valiCode:"",pageType:1,id:0,jwt:"",img:"",funId:"",vueName:"",loginCode:"",email:"",messageCode:"",showSlider:!1,remember:!0,role:"STUDENT",perName:"",rules:[K]}),beforeMount(){this.pageType=1},async created(){const e=await B();this.id=e.validateCodeId,this.img=e.img;const s=F();s.remember?(this.username=c.decode(s.usernameSave),this.password=c.decode(s.passwordSave),this.remember=!0):(this.username="",this.password="",this.remember=!1)},methods:{async changeValiCode(){const e=await B();this.id=e.validateCodeId,this.img=e.img,this.valiCode=""},backLogin(){this.username="",this.password="",this.valiCode="",this.pageType=1;let e=document.getElementsByClassName("mine_box"),s=document.getElementsByClassName("box_01");s[0].style.display="none";let d=document.getElementsByClassName("box_02");d[0].style.display="block",e[0].style.left="30px"},forgetPass(){this.username="",this.password="",this.valiCode="",this.pageType=2},pageRegister(){this.username="",this.password="",this.valiCode="",this.pageType=3;let e=document.getElementsByClassName("mine_box");e[0].style.left="370px";let s=document.getElementsByClassName("box_02");s[0].style.display="none";let d=document.getElementsByClassName("box_01");d[0].style.display="block"},async initPassword(){let e=await v({validateCodeId:this.id,validateCode:this.valiCode});if(e.code!=0){a(this,e.msg),this.changeValiCode();return}if(this.username==""||this.username==null){a(this,"账号为空,请填写账号");return}if(this.email==""||this.email==null){a(this,"邮箱为空,请填写邮箱");return}e=await D({username:this.username,email:this.email}),e.code==0?(a(this,"初始密码已发送至您的邮箱，请注意查收"),this.changeValiCode(),this.pageType=1):a(this,e.msg)},async register(){let e=await v({validateCodeId:this.id,validateCode:this.valiCode});if(e.code!=0){a(this,e.msg),this.changeValiCode();return}if(this.username==""||this.username==null){a(this,"账号为空,请填写账号");return}if(this.password==""||this.password==null){a(this,"账号为空,请填写密码");return}if(this.perName==""||this.perName==null){a(this,"姓名为空,请填写姓名");return}if(this.email==""||this.email==null){a(this,"邮箱为空,请填写邮箱");return}if(this.role==""||this.role==null){a(this,"角色为空,请选择角色");return}e=await $({username:this.username,password:this.password,perName:this.perName,email:this.email,role:this.role}),e.code==0?(a(this,"已注册成功！"),this.changeValiCode(),this.pageType=1):a(this,e.msg)},async loginSubmit(){const e=await v({validateCodeId:this.id,validateCode:this.valiCode});if(e.code!=0){a(this,e.msg),this.changeValiCode();return}if(this.username==""||this.username==null)console.log(this.username,"wh"),a(this,"用户名为空");else if(this.password==""||this.password==null)a(this,"密码为空");else{const s=F();try{await s.login(this.username,this.password),await s.setNavi(),this.remember?s.saveAccount(c.encode(this.username),c.encode(this.password)):s.removeAccount(),I.push("/MainPage")}catch{a(this,"登录失败!")}}}}}),E="/assets/2e-f8814b8e.jpg";const Q={class:"bac_box",style:{width:"100vw",height:"100vh",overflow:"hidden"}},X={class:"right-card"},Y={class:"mine_box"},Z={key:0},ee={style:{"text-align":"center"}},se=t("div",null,null,-1),te={style:{"margin-top":"10px"}},oe={style:{display:"flex","justify-content":"space-between",gap:"20px"}},ie={style:{"margin-top":"10px"}},le=t("span",null,"登录",-1),ae={key:1,class:"main3 flex-col",style:{"text-align":"center",width:"100%",height:"100%"}},ne={class:"modd33 flex-row"},ue=t("span",{class:"word44"},"账号：",-1),de={class:"modd33 flex-row"},re=t("span",{class:"word44"},"密码：",-1),me={class:"modd33 flex-row"},pe=t("span",{class:"word44"},"邮箱：",-1),he={class:"modd33 flex-row"},ce=t("span",{class:"word44"},"角色：",-1),ge=t("option",{value:"ADMIN"},"管理员",-1),_e=t("option",{value:"STUDENT"},"学生",-1),ve=t("option",{value:"TEACHER"},"教师",-1),Ce=[ge,_e,ve],fe={class:"modd33 flex-row"},ye=t("span",{class:"word44"},"验证码：",-1),we=["src"],Be={style:{"margin-top":"10px"}},Fe=t("span",null,"注册",-1),be={key:0,class:"main3 flex-col",style:{"text-align":"center",margin:"0 20px"}},Ee={style:{"margin-top":"150px"}},Ve=t("span",{class:"callBackPass"},"初始密码",-1),ke={class:"mod33 flex-row"},Ae=t("span",{class:"word44"},"登录账号：",-1),Ne={class:"mod33 flex-row"},xe=t("span",{class:"word44"},"电子邮箱：",-1),Te={class:"mod33 flex-row"},Ue=t("span",{class:"word44"},"验证码：",-1),De=["src"],$e={style:{"margin-top":"40px"}},Ie={class:"box_01",style:{display:"none"}},We=t("div",{class:"deng"},"欢迎登录教务管理系统",-1),Se=t("img",{class:"img1_b",src:E,alt:""},null,-1),Pe={class:"box_02"},Le=t("img",{class:"img2_b",src:E,alt:""},null,-1),Me=t("div",{class:"zhu"},"欢迎注册教务管理系统",-1);function je(e,s,d,ze,Re,qe){const V=b("User"),g=M,_=j,r=z,y=b("Lock"),k=R,A=q,w=H,N=G,x=J,T=P,m=L;return h(),p("div",Q,[t("div",X,[t("div",Y,[e.pageType==1?(h(),p("div",Z,[t("div",ee,[se,t("div",te,[i(T,null,{default:l(()=>[i(r,null,{default:l(()=>[i(_,{class:"inputwidth",modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=o=>e.username=o),placeholder:"请输入账号",type:"text"},{prefix:l(()=>[i(g,null,{default:l(()=>[i(V)]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(r,null,{default:l(()=>[i(_,{modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=o=>e.password=o),placeholder:"请输入密码"},{prefix:l(()=>[i(g,null,{default:l(()=>[i(y)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t("div",oe,[i(r,{style:{flex:"1"}},{default:l(()=>[i(_,{modelValue:e.valiCode,"onUpdate:modelValue":s[2]||(s[2]=o=>e.valiCode=o),placeholder:"请输入验证码"},{prefix:l(()=>[i(g,null,{default:l(()=>[i(y)]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(k,{onClick:s[3]||(s[3]=o=>e.changeValiCode()),style:{width:"86px",height:"35px","border-radius":"10px",cursor:"pointer"},referrerpolicy:"no-referrer",src:e.img},null,8,["src"])]),i(x,null,{default:l(()=>[i(w,{span:6,style:{"text-align":"left"}},{default:l(()=>[i(r,null,{default:l(()=>[i(A,{modelValue:e.remember,"onUpdate:modelValue":s[4]||(s[4]=o=>e.remember=o),label:"记住密码"},null,8,["modelValue"])]),_:1})]),_:1}),i(w,{span:18,style:{"text-align":"right"}},{default:l(()=>[i(N,{onClick:s[5]||(s[5]=o=>e.forgetPass())},{default:l(()=>[f("忘记密码")]),_:1})]),_:1})]),_:1})]),_:1})]),t("div",ie,[i(m,{class:"ripple-gradient-button",onClick:s[6]||(s[6]=o=>e.loginSubmit())},{default:l(()=>[le]),_:1})])])])):C("",!0),e.pageType==3?(h(),p("div",ae,[t("div",ne,[ue,n(t("input",{class:"inputWidth2","onUpdate:modelValue":s[7]||(s[7]=o=>e.perName=o),placeholder:"请输入您的账号"},null,512),[[u,e.perName]])]),t("div",de,[re,n(t("input",{class:"inputWidth2","onUpdate:modelValue":s[8]||(s[8]=o=>e.password=o),type:"password",placeholder:"请输入密码"},null,512),[[u,e.password]])]),t("div",me,[pe,n(t("input",{class:"inputWidth2","onUpdate:modelValue":s[9]||(s[9]=o=>e.email=o),placeholder:"请输入的邮箱"},null,512),[[u,e.email]])]),t("div",he,[ce,n(t("select",{class:"inputWidth2","onUpdate:modelValue":s[10]||(s[10]=o=>e.role=o)},Ce,512),[[S,e.role]])]),t("div",fe,[ye,n(t("input",{class:"inputWidth3","onUpdate:modelValue":s[11]||(s[11]=o=>e.valiCode=o),placeholder:"请输入验证码"},null,512),[[u,e.valiCode]]),t("img",{onClick:s[12]||(s[12]=o=>e.changeValiCode()),class:"img2",referrerpolicy:"no-referrer",src:e.img},null,8,we)]),t("div",Be,[i(m,{class:"ripple-gradient-button",onClick:s[13]||(s[13]=o=>e.loginSubmit())},{default:l(()=>[Fe]),_:1})])])):C("",!0)]),e.pageType==2?(h(),p("div",be,[t("div",Ee,[Ve,t("div",ke,[Ae,n(t("input",{class:"inputWidth2","onUpdate:modelValue":s[14]||(s[14]=o=>e.username=o),placeholder:"填写教师号/学号"},null,512),[[u,e.username]])]),t("div",Ne,[xe,n(t("input",{class:"inputWidth2","onUpdate:modelValue":s[15]||(s[15]=o=>e.email=o),placeholder:"请输入的邮箱"},null,512),[[u,e.email]])]),t("div",Te,[Ue,n(t("input",{class:"inputWidth3","onUpdate:modelValue":s[16]||(s[16]=o=>e.valiCode=o),placeholder:"请输入验证码"},null,512),[[u,e.valiCode]]),t("img",{onClick:s[17]||(s[17]=o=>e.changeValiCode()),class:"img2",referrerpolicy:"no-referrer",src:e.img},null,8,De)]),t("div",$e,[i(m,{style:{width:"270px"},type:"success",plain:"",onClick:s[18]||(s[18]=o=>e.initPassword())},{default:l(()=>[f("返回登陆")]),_:1})]),t("div",null,[i(m,{style:{width:"270px"},type:"warning",plain:"",onClick:s[19]||(s[19]=o=>e.backLogin())},{default:l(()=>[f("初始密码")]),_:1})])])])):C("",!0),t("div",Ie,[We,Se,t("div",{class:"denglu",onClick:s[20]||(s[20]=o=>e.backLogin())},"登录")]),t("div",Pe,[Le,Me,t("div",{class:"zhuce",onClick:s[21]||(s[21]=o=>e.pageRegister())},"注册")])])])}const Xe=W(O,[["render",je]]);export{Xe as default};
