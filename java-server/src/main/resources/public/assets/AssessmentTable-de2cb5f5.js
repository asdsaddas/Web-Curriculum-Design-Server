import{m as r,a as I}from"./messageBox-f4d8c0d3.js";import{f as B,a as p,h as _,i as F}from"./affairServ-848d5dc3.js";import{d as v,_ as g,e as n,f as t,j as i,k as c,F as l,M as a,v as f,o as d,L as o}from"./index-3f7c6146.js";const E=v({data:()=>({student1Id:null,student2Id:null,assessmentList:[],studentList:[],editedItem:{}}),computed:{filteredStudentList(){return this.studentList.filter(s=>s.id!==this.student1Id)},filteredEditStudentList(){return this.studentList.filter(s=>s.id!==this.editedItem.student1Id)}},created(){this.initialize()},methods:{async initialize(){this.assessmentList=await B(this.student1Id,this.student2Id),this.studentList=await p()},async query(){this.assessmentList=await B(this.student1Id,this.student2Id)},addItem(){this.editedItem={},document.getElementById("favDialog").show()},editItem(s){this.editedItem=s,document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close();const s=await _(this.editedItem.assessmentId,this.editedItem.student1Id,this.editedItem.student2Id,this.editedItem.content);s.code==0?(r(this,"保存成功"),this.query()):r(this,s.msg)},async deleteItem(s){if(!await I("确认删除吗?"))return;const m=await F(s);m.code==0?(r(this,"成功删除了一条学生互评记录"),this.query()):r(this,m.msg)}}}),C={class:"base_form"},y=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"学生互评管理")],-1),b={class:"base_query_oneLine"},L={class:"query_left"},D={class:"query_right"},k=t("span",null,"评价学生:",-1),A=t("option",{value:"0"},"请选择...",-1),w=["value"],$=t("span",null,"被评价学生:",-1),S=t("option",{value:"0"},"请选择...",-1),q=["value"],V={class:"table_center"},N={class:"content"},U=t("tr",{class:"<table_th"},[t("td",null,"评价学生学号"),t("td",null,"评价学生姓名"),t("td",null,"被评价学生学号"),t("td",null,"被评价学生姓名"),t("td",null,"评价内容"),t("td",null,"操作")],-1),M=["onClick"],z=["onClick"],T={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},j=t("div",{class:"base_title"},"--学生互评记录添加对话框显示--",-1),O={class:"dialog-div"},G={class:"dialog_content"},H=t("td",{colspan:"1",style:{"text-align":"right"}},"评价学生:",-1),J={colspan:"1"},K=t("option",{value:"0"},"请选择...",-1),P=["value"],Q=t("td",{colspan:"1",style:{"text-align":"right"}},"被评价学生:",-1),R={colspan:"1"},W=t("option",{value:"0"},"请选择...",-1),X=["value"],Y=t("td",{colspan:"1",style:{"text-align":"right"}},"评价内容",-1),Z={colspan:"1"},x={colspan:"2"};function tt(s,u,m,et,st,ut){return d(),n(l,null,[t("div",C,[y,t("div",b,[t("div",L,[t("button",{class:"commButton",onClick:u[0]||(u[0]=e=>s.addItem())},"添加学生互评记录")]),t("div",D,[k,i(t("select",{class:"commInput","onUpdate:modelValue":u[1]||(u[1]=e=>s.student1Id=e)},[A,(d(!0),n(l,null,a(s.studentList,e=>(d(),n("option",{key:e.id,value:e.id},o(e.title),9,w))),128))],512),[[c,s.student1Id]]),$,i(t("select",{class:"commInput","onUpdate:modelValue":u[2]||(u[2]=e=>s.student2Id=e)},[S,(d(!0),n(l,null,a(s.filteredStudentList,e=>(d(),n("option",{key:e.id,value:e.id},o(e.title),9,q))),128))],512),[[c,s.student2Id]]),t("button",{class:"commButton",onClick:u[3]||(u[3]=e=>s.query())},"查询学生互评记录列表")])]),t("div",V,[t("table",N,[U,(d(!0),n(l,null,a(s.assessmentList,e=>(d(),n("tr",{key:e.assessmentId},[t("td",null,o(e.stu1Num),1),t("td",null,o(e.stu1Name),1),t("td",null,o(e.stu2Num),1),t("td",null,o(e.stu2Name),1),t("td",null,o(e.content),1),t("td",null,[t("button",{class:"table_edit_button",onClick:h=>s.editItem(e)},"编辑",8,M),t("button",{class:"table_delete_button",onClick:h=>s.deleteItem(e.assessmentId)},"删除",8,z)])]))),128))])])]),t("dialog",T,[j,t("div",O,[t("table",G,[t("tr",null,[H,t("td",J,[i(t("select",{class:"commInput","onUpdate:modelValue":u[4]||(u[4]=e=>s.editedItem.student1Id=e)},[K,(d(!0),n(l,null,a(s.studentList,e=>(d(),n("option",{key:e.id,value:e.id},o(e.title),9,P))),128))],512),[[c,s.editedItem.student1Id]])])]),t("tr",null,[Q,t("td",R,[i(t("select",{class:"commInput","onUpdate:modelValue":u[5]||(u[5]=e=>s.editedItem.student2Id=e)},[W,(d(!0),n(l,null,a(s.filteredEditStudentList,e=>(d(),n("option",{key:e.id,value:e.id},o(e.title),9,X))),128))],512),[[c,s.editedItem.student2Id]])])]),t("tr",null,[Y,t("td",Z,[i(t("input",{"onUpdate:modelValue":u[6]||(u[6]=e=>s.editedItem.content=e),class:"commInput"},null,512),[[f,s.editedItem.content]])])]),t("tr",null,[t("td",x,[t("button",{class:"commButton",onClick:u[7]||(u[7]=e=>s.close()),style:{"margin-right":"30px"}}," 取消 "),t("button",{class:"commButton",onClick:u[8]||(u[8]=e=>s.confirm())},"确认")])])])])])],64)}const lt=g(E,[["render",tt]]);export{lt as default};
